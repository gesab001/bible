<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<body>

<h1 id="title"></h1>
<button onclick="previousChapter()">PREVIOUS</button>

<button onclick="nextChapter()">NEXT</button>
<div id="text"></div>

<div>

<button onclick="previousChapter()">PREVIOUS</button>

<button onclick="nextChapter()">NEXT</button>
</div>
</body>

<script>

const queryString = window.location.search;
console.log(queryString);
const urlParams = new URLSearchParams(queryString);
const book = urlParams.get('book');
var chapterN = urlParams.get('chapter');

var books = {"Genesis": "1", "Exodus": "2", "Leviticus": "3", "Numbers": "4", "Deuteronomy": "5", "Joshua": "6", "Judges": "7", "Ruth": "8", "1 Samuel": "9", "2 Samuel": "10", "1 Kings": "11", "2 Kings": "12", "1 Chronicles": "13", "2 Chronicles": "14", "Ezra": "15", "Nehemiah": "16", "Esther": "17", "Job": "18", "Psalms": "19", "Proverbs": "20", "Ecclesiastes": "21", "Song of Solomon": "22", "Isaiah": "23", "Jeremiah": "24", "Lamentations": "25", "Ezekiel": "26", "Daniel": "27", "Hosea": "28", "Joel": "29", "Amos": "30", "Obadiah": "31", "Jonah": "32", "Micah": "33", "Nahum": "34", "Habakkuk": "35", "Zephaniah": "36", "Haggai": "37", "Zechariah": "38", "Malachi": "39", "Matthew": "40", "Mark": "41", "Luke": "42", "John": "43", "Acts": "44", "Romans": "45", "1 Corinthians": "46", "2 Corinthians": "47", "Galatians": "48", "Ephesians": "49", "Philippians": "50", "Colossians": "51", "1 Thessalonians": "52", "2 Thessalonians": "53", "1 Timothy": "54", "2 Timothy": "55", "Titus": "56", "Philemon": "57", "Hebrews": "58", "James": "59", "1 Peter": "60", "2 Peter": "61", "1 John": "62", "2 John": "63", "3 John": "64", "Jude": "65", "Revelation": "66"};
var bookNumber = books[book];
var divEl = document.getElementById("text");
var bible = "";
function showChapter(_bible){
       bible = _bible;
	   var chapterText = bible["version"][bookNumber]["book"][chapterN]["chapter"];
	   document.getElementById("title").innerHTML = book + " " + chapterN;
	   console.log(book + " " + chapterN);
       console.log(bookNumber);
	   console.log(chapterText);
	   var textString = "";
	   for (var i in chapterText){
	      var word = chapterText[i]["verse_nr"] + ". " + chapterText[i]["verse"];
		  textString = textString + word;
		  textString = textString + "<br><br>";
		 
	   }
	   divEl.innerHTML = textString;

}

function getChapter(){
      const url = "../assets/versions/kjv-version.json";
 

	const xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
       var bible = JSON.parse(this.responseText);
	   console.log(bible["type"]);


	   showChapter(bible);

			
    }
    xhttp.open("GET", url);
    xhttp.send();	
}

getChapter();

function nextChapter(){
   try{
    divEl.innerHTML = "";
   chapterN = parseInt(chapterN) + 1;
   chapterN = chapterN.toString();

   	   var chapterText = bible["version"][bookNumber]["book"][chapterN]["chapter"];
	   document.getElementById("title").innerHTML = book + " " + chapterN;
	   console.log(book + " " + chapterN);
       console.log(bookNumber);
	   console.log(chapterText);
	   var textString = "";
	   for (var i in chapterText){
	      var word = chapterText[i]["verse_nr"] + ". " + chapterText[i]["verse"];
		  textString = textString + word;
		  textString = textString + "<br><br>";
		 
	   }
	   divEl.innerHTML = textString;
	   	   window.scrollTo(0, 0);
	}catch(err){
       console.log(err.message);
	       divEl.innerHTML = "";
   chapterN = parseInt(chapterN) - 1;
   chapterN = chapterN.toString();

   	   var chapterText = bible["version"][bookNumber]["book"][chapterN]["chapter"];
	   document.getElementById("title").innerHTML = book + " " + chapterN;
	   console.log(book + " " + chapterN);
       console.log(bookNumber);
	   console.log(chapterText);
	   var textString = "";
	   for (var i in chapterText){
	      var word = chapterText[i]["verse_nr"] + ". " + chapterText[i]["verse"];
		  textString = textString + word;
		  textString = textString + "<br><br>";
		 
	   }
	   divEl.innerHTML = textString;
	   	   window.scrollTo(0, 0);  
    }	
   
}

function previousChapter(){
   try{
			divEl.innerHTML = "";
			
		   chapterN = parseInt(chapterN) - 1;
		   chapterN = chapterN.toString();
			   var chapterText = bible["version"][bookNumber]["book"][chapterN]["chapter"];
			   document.getElementById("title").innerHTML = book + " " + chapterN;
			   console.log(book + " " + chapterN);
			   console.log(bookNumber);
			   console.log(chapterText);
			   var textString = "";
			   for (var i in chapterText){
				  var word = chapterText[i]["verse_nr"] + ". " + chapterText[i]["verse"];
				  textString = textString + word;
				  textString = textString + "<br><br>";
				 
			   }
			   divEl.innerHTML = textString;
			   	   	   window.scrollTo(0, 0);  

	   }
	   catch(err){
	       console.log(err.message);
		   			divEl.innerHTML = "";
			
		   chapterN = parseInt(chapterN) + 1;
		   chapterN = chapterN.toString();
			   var chapterText = bible["version"][bookNumber]["book"][chapterN]["chapter"];
			   document.getElementById("title").innerHTML = book + " " + chapterN;
			   console.log(book + " " + chapterN);
			   console.log(bookNumber);
			   console.log(chapterText);
			   var textString = "";
			   for (var i in chapterText){
				  var word = chapterText[i]["verse_nr"] + ". " + chapterText[i]["verse"];
				  textString = textString + word;
				  textString = textString + "<br><br>";
				 
			   }
			   divEl.innerHTML = textString;
			   	   	   window.scrollTo(0, 0);  

	   }
   
}
</script>

</html>
